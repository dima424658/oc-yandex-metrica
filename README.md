# Яндекс Метрика для Opencart 4.x
Основан на [официальном модуле](https://yandex.ru/support/metrica/ecommerce/opencart.html) для Opencart 2.3+

## Возможности модуля «Яндекс Метрика»
#### Добавление новых счетчиков Метрики с включенными по умолчанию опциями
- Электронная коммерция
- Вебвизор
- Карта кликов

#### Передача событий электронной коммерции
- добавление товара в корзину
- просмотр карточки товара
- удаление товара из корзины
- покупка

#### Детализация передаваемых данных о товаре


## Начало работы
1. Если у вас еще нет счетчика Метрики, [создайте его](https://yandex.ru/support/metrica/quick-start.html). Убедитесь, что адрес сайта указан правильно в настройках счетчика. Для этого перейдите в Метрику на страницу **Настройки**. Обратите внимание на поле **Адрес** — здесь должен быть указан адрес сайта, на который вы хотите установить модуль.
2. В настройках счетчика включите опцию **Электронная коммерция**. В код счетчика добавится контейнер для сбора данных `dataLayer`.<br>
![](https://yastatic.net/s3/doc-binary/freeze/ru/metrica/9deb0960188cadb6638cf5d37215610dfda6a1ca.png)<br>
3. Убедитесь, что в OpenCart не активирован другой аналогичный модуль, устанавливающий счетчик Метрики. Если такой модуль установлен, отключите или удалите его.

## Установка модуля
1. [Скачайте установочный ZIP-архив.](#)
2. Перейдите в панель администратора OpenCart и авторизуйтесь.
3. Перейдите на страницу **Модули / Расширения** → **Установка расширений**.
4. Нажмите кнопку **Загрузить** и выберите скачанный архив.
5. Активируйте модуль. Для этого нажмите значок **+**.
6. Перейдите на страницу **Модули / Расширения**, выберите фильтр **Аналитика** и напротив модуля «Яндекс Метрика» нажмите значок **+**. Модуль установлен.

## Настройка модуля
1. На странице **Модули / Расширения** выберите фильтр **Аналитика**.
2. Напротив модуля «Яндекс Метрика» нажмите значок .
3. Укажите номер счетчика, который установлен на вашем сайте. Модуль может обнаружить уже установленный на сайте счетчик Метрики. Чтобы узнать его номер, перейдите на вкладку **Поиск метрики** и нажмите кнопку **Найти метрику**.
4. По умолчанию опция **Вебвизор** включена. Она позволяет [записывать визиты посетителей](https://yandex.ru/support/metrica/webvisor-v2/info.html), чтобы вы могли более полно анализировать статистику. При необходимости вы можете отключить Вебвизор в любой момент.
5. Чтобы включить запись ошибок, которые происходят во время работы модуля, на вкладке **Логирование** установите переключатель в положение **Да**.
6. Чтобы сохранить изменения, нажмите значок **Сохранить**.

Чтобы отключить модуль, при его редактировании выберите статус «Отключено».

## Проверка отправки данных
Чтобы проверить, отправляются ли в Метрику данные:
- электронной коммерции, см. раздел [Проверка настройки электронной коммерции](https://yandex.ru/support/metrica/ecommerce/check.html).
- о посещениях на сайте, см. раздел [Проверка счетчика](https://yandex.ru/support/metrica/general/check-counter.html).

Данные электронной коммерции появятся в Метрике спустя несколько часов после их первой отправки. Чтобы посмотреть отчеты электронной коммерции, в Метрике откройте Отчеты → Электронная коммерция. [Подробно об отчетах](https://yandex.ru/support/metrica/data/e-commerce-reports.html#e-commerce-reports).

Данные о визитах и просмотрах появятся в Метрике при первых посещениях сайта после установки модуля. Чтобы посмотреть статистику, в Метрике откройте Отчеты. Посмотрите, как работать с отчетами в разделе [Настройка и просмотр отчета](https://yandex.ru/support/metrica/reports/report-general.html).

Этот модуль предоставляется "как есть". Используйте на свой страх и риск. Не стесняйтесь делать pull request'ы и создавать issue
